
@{
    ViewData["Title"] = "Create";
}
@model EmployeeVM
@inject DemoMVC.BL.Intenfaces.ICountry County

@section JqueryUi{
@*    <link  href="~/plugins/bootstrap-select/css/bootstrap-select.css" rel="stylesheet"  />
*@    <link  href="~/jqueryui/themes/base/jquery-ui.css" rel="stylesheet" />
}

<div class="block-header">
    <h2>@SharedLocalizer["CNE"]</h2>
</div>
<h1> @TempData["message"]</h1>
<div asp-validation-summary="All" class="text-danger">

</div>
<form asp-action="Create" asp-controller="Employee"  method="post" class="form-group" enctype="multipart/form-data">
    @{await Html.RenderPartialAsync("~/Views/partials/Employee/EditCreate.cshtml");}

    <center>
        <input type="submit" value="@SharedLocalizer["Save"]"  class="btn btn-primary m-auto" />
        <a asp-action="index" asp-controller="department" class="btn btn-info"> @SharedLocalizer["Return"]</a>
    </center>
</form>
@section jqueryValidation{
    <script src="~/jqueryui/jquery-ui.min.js"></script>
    <script src="~/plugins/jquery-validation/jquery.validate.js"></script>
    <script src="~/plugins/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
     <script>
        $( function() {
            $( "#datepicker" ).datepicker();
            $("#CountyList").change(function() {
                var CountryId = $("#CountyList option:selected").val();
                $('#CityList').empty();
                $('#CityList').append("<option >Choose City</option>")

                $.ajax({
                    type:"POST",
                    url:"/employee/GetCityByCounrtyId",
                    data: {countyId:CountryId},
                    success:function(res) {
                        $.each(res, function(index, element) {
                            $('#CityList').append("<option value = '"+element.Id+"'>"+element.Name+"</option>")
                        })
                    }
                })
            }) 
            $("#CityList").change(function() {
                var CityId = $("#CityList option:selected").val();
                console.log($("#CityList option:selected"))
                $('#DistrictId').empty();
                $('#DistrictId').append("<option >Choose City</option>")
                    
                $.ajax({
                    type: "POST",
                    url:"/employee/GetDistrictByCityId",
                    data: {cityId:CityId},
                    success:function(res) {
                        $.each(res, function(index, element) {
                            $('#DistrictId').append("<option value = '"+element.Id+"'>"+element.Name+"</option>")
                        })
                    }
                })
            })

        });
  </script>
}

